<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title>DressCode: Snake</title>
  <style type="text/css">code{white-space: pre;}</style>
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <link rel="stylesheet" href="styles.css">
</head>
<body>
<main>
<header>
<h1 class="title">DressCode: Snake</h1>
</header>
<nav id="TOC">
<ul>
<li><a href="#co-to-jest-wąż">Co to jest wąż?</a></li>
<li><a href="#co-będzie-ci-potrzebne">Co będzie Ci potrzebne</a></li>
<li><a href="#zadanie">Zadanie</a><ul>
<li><a href="#snake.js"><code>snake.js</code></a></li>
<li><a href="#snake-framework.js"><code>snake-framework.js</code></a></li>
<li><a href="#snake.html"><code>snake.html</code></a></li>
</ul></li>
</ul>
</nav>
<p><strong>Start:</strong> 5 maja 2016</p>
<p><strong>Termin nadsyłania rozwiązań:</strong> 30 maja 2016</p>
<p><strong>Czas, który będzie Ci potrzebny na rozwiązanie całego zadania</strong>: 16 godzin</p>
<p>Po tygodniach ciężkiej, aczkolwiek (mamy nadzieję :) ) ciekawej i inspirującej pracy, czas na trochę rozrywki! Wybór nie jest może największy, ale co powiesz na <a href="http://mina86.github.io/dresscode-snake/demo/snake.html">partyjkę Węża</a>?</p>
<p>Pewnie już się domyślasz, co jest kolejnym zadaniem. Tym razem Twoim celem będzie napisanie gry Wąż. W tym celu będziesz musiała zastosować metodologię <a href="https://pl.wikipedia.org/wiki/Programowanie_sterowane_zdarzeniami">programowania zdarzeniowego</a>—czyli w prostszych słowach: napiszesz kod, który umie zareagować na &quot;zdarzenia&quot; niezależne od niego—np. po naciśnięciu przez użytkownika danego klawisza wykona określoną czynność.</p>
<h2 id="co-to-jest-wąż"><a href="#co-to-jest-wąż">Co to jest wąż?</a></h2>
<p>Otóż wąż to jedna z najprostszych—a jednocześnie kiedyś najbardziej popularnych—gier komputerowych (nie wierzysz? zapytaj rodziców). W grze gracz steruje długim i cienkim stworzeniem (podobnym do węża), które porusza się po planszy, zbierając jedzenie. Wąż stara się NIE uderzyć własną głową o rozstawione na planszy przeszkody, a także o kawałek własnego ogona (w przeciwnym razie gra się kończy). Problem w tym, że im więcej wąż „zje”, tym szybciej się porusza, a także tym dłuższy robi się jego ogon, i tym trudniej nim sterować—zresztą <a href="http://mina86.github.io/dresscode-snake/demo/snake.html">przekonaj się sama</a> :-)</p>
<p>W naszym przykładzie wężem steruje się za pomocą klawiszy strzałek (lewo, prawo).</p>
<h2 id="co-będzie-ci-potrzebne"><a href="#co-będzie-ci-potrzebne">Co będzie Ci potrzebne</a></h2>
<p>Swoją grę będziesz pisać w języku JavaScript i będziesz potrzebować solidnej znajomości jego podstaw. Dlatego, jeśli nie przerobiłaś przy okazji poprzednich zadań kursu JavaScript, zachęcamy Cię do zrobienia tego teraz. <strong>Zarezerwuj sobie na to co najmniej 5 godzin.</strong> Konkretne sekcje kursów, które Ci się przydadzą, wymieniliśmy na <a href="http://mina86.github.io/dresscode-sorting/">tej stronie</a>.</p>
<h2 id="zadanie"><a href="#zadanie">Zadanie</a></h2>
<p>Aby ułatwić Ci zadanie, przygotowaliśmy szkielet rozwiązania w postaci trzech plików. Pobierz na swój komputer następujące pliki:</p>
<ul>
<li><a href="http://mina86.github.io/dresscode-snake/files/snake.html"><code>snake.html</code></a>,</li>
<li><a href="http://mina86.github.io/dresscode-snake/files/snake-framework.js"><code>snake-framework.js</code></a> oraz</li>
<li><a href="http://mina86.github.io/dresscode-snake/files/snake.js"><code>snake.js</code></a>.</li>
</ul>
<h3 id="snake.js"><a href="#snake.js"><code>snake.js</code></a></h3>
<p><strong>Twoim zadaniem będzie uzupełnienie pliku</strong> <code>snake.js</code>. W tej chwili znajdziesz w nim definicje czterech funkcji, które będą pomagać wężowi „poruszać się”. W naszym pliku te funkcje są puste—napisanie ich treści należy do Ciebie.</p>
<ul>
<li><p>Funkcja <code>game.prepareBoard</code> (czyli po angielsku „przygotuj planszę”) będzie wykonywana na samym początku każdej gry. Jej celem jest przygotowanie planszy („wyzerowanie stanu gry”). Aby przygotować planszę, powinnaś ustawić i narysować na niej węża, jabłka oraz kamienie. Rysować możesz, korzystając z gotowych funkcji <code>game.draw...</code> opisanych poniżej.</p></li>
<li><p>Funkcje <code>game.turnLeft</code> oraz <code>game.turnRight</code> (czyli po angielsku „skręć w lewo” i „skręć w prawo”) będą wykonywane za każdym razem, gdy gracz wciśnie przycisk skrętu (strzałkę) w lewo lub w prawo. Uwaga: samo wciśnięcie klawisza nie powoduje jeszcze ruchu węża.</p>
<p>Funkcja <code>game.turnLeft</code> i <code>game.turnRight</code> powinna tylko „obrócić” głowę węża—narysować ją tak, by wskazywała w odpowiednią stronę.</p>
<p>Dopiero funkcja <code>game.nextMove</code> (czyli „wykonaj następny ruch”) będzie poruszać węża.</p>
<p><strong>Uwaga</strong>: Twoim zadaniem będzie napisać funkcje tak, aby troszkę ułatwić graczom grę, gdy będą naciskać klawisze bardzo szybko. Na przykład w przypadku szybkiego dwukrotnego skrętu w lewo wąż nie powinien „zawracać w miejscu”, ale najpierw skręcić o jedno „oczko” w lewo, i dopiero tam wykonać kolejny zakręt. Chodzi o to, aby wąż nie „zjadał” zbyt łatwo samego siebie.</p></li>
<li><p>Funkcja <code>game.nextMove</code> (czyli „wykonaj następny ruch”) będzie wykonywana za każdym razem, kiedy ma nastąpić ruch węża. Funkcja powinna sprawdzać, czy w efekcie ruchu wąż uderza w kamień lub swoje własne ciało (co kończy grę), czy może zjada jabłko (co go wydłuża i zwiększa liczbę punktów).</p>
<p>Aby zmienić wygląd planszy, powinnaś wołać funkcje <code>game.draw...</code> (czyli „narysuj ...”), które uaktualniają wygląd planszy.</p></li>
</ul>
<h3 id="snake-framework.js"><a href="#snake-framework.js"><code>snake-framework.js</code></a></h3>
<p>Pliku <code>snake-framework.js</code> nie musisz zmieniać—choć możesz oczywiście do niego zajrzeć, aby zobaczyć jak napisane są poszczególne funkcje. Ten plik zawiera funkcje i zmienne pomocne przy implementacji gry Wąż.</p>
<p>TODO: Opis współrzędnych oraz faktu, że framework korzysta z obiektów z dwoma polami–x oraz y–do reprezentacji współrzędnej.</p>
<ul>
<li><p>Zmienne <code>WIDTH</code> i <code>HEIGHT</code> określają odpowiednie szerokość i wysokość planszy do gry. Należy pamiętać, że układ współrzędnych zaczyna się od punktu <code>(0, 0)</code> co oznacza, że możliwe współrzędne X są od zera do <code>WIDTH - 1</code> (włącznie), a Y—od zera do <code>HEIGHT - 1</code>.</p></li>
<li><p>Funkcja <code>random</code> zwraca losową liczbę całkowita z podanego zakresu. Przykładowo, <code>random(0, 1)’ zwróci zero lub jeden,     a wywołanie</code>random(1, 6)` symuluje rzut kostką.</p></li>
<li><p>Funkcja <code>randomPoint</code> zwraca losową współrzędna z planszy do gry.</p>
<p>Przy wykorzystaniu tej funkcji do wyboru miejsca dla nowego jabłka lub kamienia, należy pamiętać, że losowa pozycja może być już zajęta przez jakiś obiekt na planszy. Czy to smaczne jabłko, złowieszczy kamień, czy w końcu samego węża.</p>
<p>Przykładowo, wywołanie <code>randomPoint()</code> może zwrócić <code>{x: 11, y:23}</code>.</p></li>
<li><p>Funkcja <code>game.setScore</code> przyjmuje jeden argument, który staje się nowym wynikiem gracza. Uaktualnia ona liczbę punktów wyświetlaną na stronie.</p>
<p>Przykładowe wywołanie to <code>game.setScore(10)</code>, które ustawia liczbę punktów na 10.</p></li>
<li><p>Funkcja <code>game.stopGame</code> kończy grę i wyświetla aktualny wynik. Powinna zostać wywołana wewnątrz <code>game.nextMove</code> jeżeli wąż „zderzy” się z kamieniem lub samym sobą.</p>
<p>Funkcja nie przyjmuje argumentów, ani nie zwraca żadnej wartości, więc jej wywołanie to zwykłe <code>game.stopGame()</code>.</p></li>
<li><p>Funkcje <code>game.drawApple</code>, <code>game.drawStone</code> i <code>game.drawGrass</code> rysują odpowiednio jabłko, kamień lub trawę na podanej współrzędnej.</p>
<p>Ta ostatnia może służyć do „wyczyszczenia” pola, które było zajęte przez węża, jabłko lub kamień, ale obecnie jest puste.</p>
<p>Funkcje te są potrzebne przy przygotowywaniu planszy poprzez <code>game.prepareBoard</code> oraz przy uaktualnianiu planszy wewnątrz <code>game.nextMove</code>.</p>
<p>Przykładowo, sekwencja:</p>
<pre><code>game.drawApple({ x: 0, y: 0 });
game.drawApple({ x: 10, y: 10 });
game.drawStone({ x: 0, y: HEIGHT - 1});
game.drawStone({ x: WIDTH - 1, y: HEIGHT - 1});</code></pre>
<p>Narysuje jabłko w lewym górnym rogu oraz na pozycji punkcie <code>(10, 10)</code>, a także kamień w lewym dolnym i prawym dolnym rogu.</p></li>
<li><p>Funkcje <code>game.drawSnakeHead</code>, <code>game.drawSnakeBody</code> oraz <code>game.drawSnakeTail</code> rysują poszczególne części węża–głowę, fragment ciała oraz ogon.</p>
<p>Przyjmują one dwa argumenty. Pierwszy określa pozycję danego fragmentu węża, a drugi jego kształt. Ponieważ wąż wije się w różnych kierunkach, jego ciało może przyjmować kształt różnych wygibasów.</p>
<p>Kształt ten jest określany poprzez jedną z poniższych wartości:</p>
<ul>
<li><code>Direction.LEFT_FROM_RIGHT</code> lub <code>Direction.LEFT</code>—wąż porusza się z prawej na lewą stronę: ←</li>
<li><code>Direction.RIGHT_FROM_LEFT</code> lub <code>Direction.RIGHT</code>—wąż porusza się z lewej na prawą stronę: →</li>
<li><code>Direction.UP_FROM_DOWN</code> lub <code>Direction.UP</code>—wąż porusza się z dołu na górę: ↑</li>
<li><code>Direction.DOWN_FROM_UP</code> lub <code>Direction.DOWN</code>—wąż porusza się z góry na dół: ↓</li>
<li><code>Direction.LEFT_FROM_DOWN</code>—wąż porusza się z dołu w lewo: ↰</li>
<li><code>Direction.LEFT_FROM_UP</code>— porusza się z góry w lewo: ↲</li>
<li><code>Direction.RIGHT_FROM_DOWN</code>— porusza się z dołu w prawo: ↱</li>
<li><code>Direction.RIGHT_FROM_UP</code>— porusza się z góry w prawo: ↳</li>
<li><code>Direction.UP_FROM_LEFT</code>— porusza się z lewej w górę: ⬏</li>
<li><code>Direction.DOWN_FROM_LEFT</code>— porusza się z lewej w dół: ⬎</li>
<li><code>Direction.UP_FROM_RIGHT</code>— porusza się z lewej w górę: ⬑</li>
<li><code>Direction.DOWN_FROM_RIGHT</code>— porusza się z lewej w dół: ⬐</li>
</ul>
<p>Przykładowo, sekwencja:</p>
<pre><code>game.drawSnakeHead({ x: 10, y: 10 }, Direction.UP_FROM_DOWN);
game.drawSnakeBody({ x: 10, y: 11 }, Direction.UP_FROM_RIGHT);
game.drawSnakeBody({ x: 11, y: 11 }, Direction.LEFT_FROM_RIGHT);
game.drawSnakeBody({ x: 12, y: 11 }, Direction.LEFT_FROM_RIGHT);
game.drawSnakeBody({ x: 13, y: 11 }, Direction.LEFT_FROM_DOWN);
game.drawSnakeBody({ x: 13, y: 12 }, Direction.UP_FROM_DOWN);
game.drawSnakeTail({ x: 13, y: 13 }, Direction.UP_FROM_DOWN);</code></pre>
<p>Narysuje węża w kształcie pokazanym na poniższym obrazku:</p>
<figure>
<img src="snake-draw-example.png" alt="Przykładowy wąż" /><figcaption>Przykładowy wąż</figcaption>
</figure></li>
</ul>
<h3 id="snake.html"><a href="#snake.html"><code>snake.html</code></a></h3>
<p>Plik <code>snake.html</code> to prosty dokument HTML, który definiuje przestrzeń, na której rysowana będzie plansza do gry i ruchy węża, a także element, w którym wyświetlany będzie aktualny wynik gry.</p>
</main>
</body>
</html>
